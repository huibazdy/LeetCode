88.合并两个有序数组

> 标签：数组

给定两个非降序数组 nums1 和 nums2，数组元素个数分别为 m 和 n，合并 nums2 到 nums1 中，合并后数组依然是非降序排列。（注意：nums1 的长度是就是 m+n ，后续元素为 n 个 0 ） 

思路：挨个遍历 nums2 中的元素，对每个元素在 nums1 中找到合适的插入位置插入（利用`insert()`成员函数）即可。注意：插入一个新元素，就应该从 nums1 尾部删除一个 0 元素。 



```c++
class Solution {
public:
    void merge(vector<int>& nums1, int m, vector<int>& nums2, int n) {
		for(int i = 0; i < n; i++) {
            int pos = 0;
            while(nums2[i] <= nums1[pos])  // 找到插入位置
                pos++;
            nums1.pop_back();              // 删除最后一个元素，size-1，capacity 不变 
            nums1.insert(nums1.begin()+pos-1,nums2[i]);         // 插入元素到 nums1 中
        }
    }
};
```

运行结果超出空间：heap-buffer-overflow



优化，新的插入位置一直是在向后移动的，nums2 的后一个元素的插入位置肯定是在前一次插入位置的后面，因为nums2中的元素也是非降序排列的。



利用 hash 将 nums2 中各个出现过的元素和其出现次数都统计出来：

```c++
#include <unordered_map>

unordered_map<int,int> hash;  // 键为元素，值为出现次数

for(int i = 0; i < m; i++) {
    if(hash.find(nums2[i]) == hash.end())
        hash.insert(std::make_pair(nums2[i],1));
    else
        ++hash[nums2[i]];
}
```



至此只需要：

1. 找出 hash 中的每个键的插入位置
2. 删除 hash[nums2[i]] 个 0；
3. 在插入位置前插入 hash[nums2[i]] 个 nums2[i] 即可



```c++
int pos = 0;  // 记录插入位置
for(auto iter = hash.begin(); iter != hash.end(); iter++) {  // 遍历 hash 键
    // 优化，因为升序所以从上一次的插入位置向后查找插入位置
    while(nums2[i] <= nums1[pos])
        pos++;
    // 删除 hash[nums2[i]] 个 0
    while(hash[nums2[i]]--)
        nums1.pop_back();
    // 插入
    nums1.insert(pos,hash[nums2[i]],nums2[i]);
}
```



完整代码：

```c++
class Solution {
public:
    void merge(vector<int>& nums1, int m, vector<int>& nums2, int n) {
        unordered_map<int,int> hash;
		for(int i = 0; i < m; i++) {
            if(hash.find(nums2[i]) == hash.end())
                hash.insert(std::make_pair(nums2[i],1));
            else
                ++hash[nums2[i]];
        }
        int pos = 0;
        for(auto iter = hash.begin(); iter != hash.end(); iter++) {
            while(iter->first <= nums1[pos])
                pos++;
            while(iter->second--)
                nums1.pop_back();
            nums1.insert(pos,iter->second,iter->first);
        }
    }
};
```